<!DOCTYPE html>
<html>
<head>
    <title>🎯 Execute Transfers Test - Direct Run</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #00ff00; }
        .container { max-width: 800px; margin: 0 auto; }
        .step { margin: 20px 0; padding: 15px; border: 1px solid #333; border-radius: 5px; }
        .code { background: #000; padding: 10px; border-radius: 5px; overflow-x: auto; }
        button { background: #00ff00; color: #000; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        button:hover { background: #00cc00; }
        .warning { color: #ffaa00; }
        .success { color: #00ff00; }
        .error { color: #ff0000; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎯 Execute Transfers Test - Direct Run</h1>
        
        <div class="step">
            <h2>📋 Instructions:</h2>
            <ol>
                <li class="warning">Make sure all services are running (✅ Done!)</li>
                <li>Open <a href="http://localhost:5175" target="_blank">http://localhost:5175</a> in a new tab</li>
                <li>Connect your wallet (any wallet option)</li>
                <li>Come back here and click "Run Test" button</li>
            </ol>
        </div>

        <div class="step">
            <h2>🚀 Quick Actions:</h2>
            <button onclick="openApp()">📱 Open App</button>
            <button onclick="copyTestCode()">📋 Copy Test Code</button>
            <button onclick="runInConsole()">⚡ Run Test</button>
        </div>

        <div class="step">
            <h2>📊 Test Data:</h2>
            <div class="code">
Transfer 1: sei1abc123def456ghi789jkl012mno345pqr678stu → 10.5 SEI
Transfer 2: sei1def456ghi789jkl012mno345pqr678stu901vwx → 25.0 SEI  
Transfer 3: sei1ghi789jkl012mno345pqr678stu901vwx234yz → 5.75 SEI
            </div>
        </div>

        <div class="step">
            <h2>🎮 Manual Console Commands:</h2>
            <div class="code" id="testCode">
// Quick Transfer Test
TransfersTest.quickTransferTest()

// Full Test (3 transfers)
TransfersTest.executeTransfersTest()
            </div>
        </div>

        <div class="step">
            <h2>📝 Expected Results:</h2>
            <ul>
                <li class="success">✅ Navigate to Payments page</li>
                <li class="success">✅ Fill transfer forms automatically</li>
                <li class="success">✅ Submit transfers</li>
                <li class="success">✅ Check Dashboard for updates</li>
                <li class="success">✅ See portfolio data change</li>
            </ul>
        </div>
    </div>

    <script>
        function openApp() {
            window.open('http://localhost:5175', '_blank');
        }

        function copyTestCode() {
            const code = `// 🎯 Execute Transfers Test - Copy this to browser console
console.log('🎯 Executing Transfers Test...');

// Test data
const TRANSFER_TESTS = [
  { recipient: 'sei1abc123def456ghi789jkl012mno345pqr678stu', amount: '10.5', remark: 'Test transfer' },
  { recipient: 'sei1def456ghi789jkl012mno345pqr678stu901vwx', amount: '25.0', remark: 'Second test transfer' },
  { recipient: 'sei1ghi789jkl012mno345pqr678stu901vwx234yz', amount: '5.75', remark: 'Third test transfer' }
];

function delay(ms) { return new Promise(resolve => setTimeout(resolve, ms)); }
function findButtonByText(text) { return Array.from(document.querySelectorAll('button')).find(btn => btn.textContent && btn.textContent.includes(text)); }
function findInputByPlaceholder(placeholder) { return Array.from(document.querySelectorAll('input')).find(input => input.placeholder && input.placeholder.toLowerCase().includes(placeholder.toLowerCase())); }
function findTextareaByPlaceholder(placeholder) { return Array.from(document.querySelectorAll('textarea')).find(textarea => textarea.placeholder && textarea.placeholder.toLowerCase().includes(placeholder.toLowerCase())); }

async function quickTransferTest() {
  console.log('⚡ Quick Transfer Test...');
  
  // Navigate to Payments
  const paymentsBtn = findButtonByText('Payments');
  if (paymentsBtn) { paymentsBtn.click(); await delay(1000); }
  
  // Check wallet
  const walletAvatar = document.querySelector('[style*="gradientGreen"]');
  if (!walletAvatar) { console.log('❌ Connect wallet first!'); return; }
  
  // Fill form
  const recipientInput = findInputByPlaceholder('sei1') || document.querySelector('input[type="text"]');
  const amountInput = findInputByPlaceholder('0.00') || document.querySelector('input[type="number"]');
  const remarkTextarea = findTextareaByPlaceholder('description') || document.querySelector('textarea');
  const sendButton = findButtonByText('Send');
  
  if (recipientInput && amountInput && sendButton) {
    recipientInput.value = TRANSFER_TESTS[0].recipient;
    recipientInput.dispatchEvent(new Event('input', { bubbles: true }));
    await delay(300);
    
    amountInput.value = TRANSFER_TESTS[0].amount;
    amountInput.dispatchEvent(new Event('input', { bubbles: true }));
    await delay(300);
    
    if (remarkTextarea) {
      remarkTextarea.value = TRANSFER_TESTS[0].remark;
      remarkTextarea.dispatchEvent(new Event('input', { bubbles: true }));
      await delay(300);
    }
    
    console.log('🚀 Submitting transfer...');
    sendButton.click();
    
    await delay(2000);
    console.log('✅ Transfer submitted! Check Dashboard for updates.');
    
    // Go to Dashboard
    const dashboardBtn = findButtonByText('Dashboard');
    if (dashboardBtn) { dashboardBtn.click(); }
  } else {
    console.log('❌ Form elements not found');
  }
}

// Run quick test
quickTransferTest();`;

            navigator.clipboard.writeText(code).then(() => {
                alert('✅ Test code copied! Paste it in browser console at http://localhost:5175');
            });
        }

        function runInConsole() {
            alert('🎯 Steps to run:\n\n1. Open http://localhost:5175\n2. Connect wallet\n3. Press F12 (Developer Tools)\n4. Go to Console tab\n5. Click "Copy Test Code" and paste it\n6. Press Enter\n\n✅ The test will run automatically!');
        }
    </script>
</body>
</html>